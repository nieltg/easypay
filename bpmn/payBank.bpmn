<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_1abt66d" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="2.0.3">
  <bpmn:collaboration id="Collaboration_07iv80a">
    <bpmn:participant id="Participant_1nji27d" name="payVA" processRef="Process_1" />
    <bpmn:participant id="Participant_0x2mpsp" name="Bank" processRef="Process_139932m" />
    <bpmn:participant id="Participant_07trmyx" name="Consumer" processRef="Process_12yj0qn" />
    <bpmn:messageFlow id="MessageFlow_1nmcgwc" sourceRef="IntermediateThrowEvent_1y0gefv" targetRef="Participant_07trmyx" />
    <bpmn:messageFlow id="MessageFlow_1rqme2y" sourceRef="Participant_0x2mpsp" targetRef="IntermediateThrowEvent_0d9m3m8" />
    <bpmn:messageFlow id="MessageFlow_1fuwq7g" sourceRef="EndEvent_1hvorwe" targetRef="Participant_07trmyx" />
  </bpmn:collaboration>
  <bpmn:process id="Process_1" isExecutable="true">
    <bpmn:startEvent id="StartEvent_1">
      <bpmn:outgoing>SequenceFlow_1foky9s</bpmn:outgoing>
      <bpmn:messageEventDefinition messageRef="Message_05simf4" />
    </bpmn:startEvent>
    <bpmn:task id="Task_0vy2dj5" name="Generate PaymentID">
      <bpmn:incoming>SequenceFlow_1foky9s</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1qbf7gc</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="SequenceFlow_1foky9s" sourceRef="StartEvent_1" targetRef="Task_0vy2dj5" />
    <bpmn:task id="Task_1pjaqp6" name="Change Amount">
      <bpmn:incoming>SequenceFlow_1qbf7gc</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0bkiv4e</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0h2ta5b</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="SequenceFlow_1qbf7gc" sourceRef="Task_0vy2dj5" targetRef="Task_1pjaqp6" />
    <bpmn:sequenceFlow id="SequenceFlow_0bkiv4e" sourceRef="Task_1pjaqp6" targetRef="IntermediateThrowEvent_1y0gefv" />
    <bpmn:intermediateThrowEvent id="IntermediateThrowEvent_1y0gefv" name="returnUniqueAmount">
      <bpmn:incoming>SequenceFlow_0bkiv4e</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0kw3mss</bpmn:outgoing>
      <bpmn:messageEventDefinition messageRef="Message_1x56o4y" />
    </bpmn:intermediateThrowEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0h2ta5b" sourceRef="Task_1pjaqp6" targetRef="IntermediateThrowEvent_0grotl5" />
    <bpmn:intermediateCatchEvent id="IntermediateThrowEvent_0grotl5" name="3 hours">
      <bpmn:incoming>SequenceFlow_0h2ta5b</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_188q1po</bpmn:outgoing>
      <bpmn:timerEventDefinition>
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">P3H</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0kw3mss" sourceRef="IntermediateThrowEvent_1y0gefv" targetRef="IntermediateThrowEvent_0d9m3m8" />
    <bpmn:intermediateCatchEvent id="IntermediateThrowEvent_0d9m3m8" name="receivePaymentStatus">
      <bpmn:incoming>SequenceFlow_0kw3mss</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_176gbgu</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_03zug16</bpmn:outgoing>
      <bpmn:messageEventDefinition messageRef="Message_1ck2ae4" />
    </bpmn:intermediateCatchEvent>
    <bpmn:task id="Task_0zipbpk" name="Filter by Amount">
      <bpmn:incoming>SequenceFlow_03zug16</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1vbtzg4</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="SequenceFlow_03zug16" sourceRef="IntermediateThrowEvent_0d9m3m8" targetRef="Task_0zipbpk" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_0z3rlgr">
      <bpmn:incoming>SequenceFlow_1vbtzg4</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0pm8tqi</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_176gbgu</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_1vbtzg4" sourceRef="Task_0zipbpk" targetRef="ExclusiveGateway_0z3rlgr" />
    <bpmn:sequenceFlow id="SequenceFlow_0pm8tqi" sourceRef="ExclusiveGateway_0z3rlgr" targetRef="EndEvent_1hvorwe">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">filteredAmount==amount</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="EndEvent_1hvorwe">
      <bpmn:incoming>SequenceFlow_0pm8tqi</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_188q1po</bpmn:incoming>
      <bpmn:messageEventDefinition messageRef="Message_1fh6424" />
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_188q1po" sourceRef="IntermediateThrowEvent_0grotl5" targetRef="EndEvent_1hvorwe" />
    <bpmn:sequenceFlow id="SequenceFlow_176gbgu" sourceRef="ExclusiveGateway_0z3rlgr" targetRef="IntermediateThrowEvent_0d9m3m8">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">else</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
  </bpmn:process>
  <bpmn:process id="Process_139932m" isExecutable="false" />
  <bpmn:process id="Process_12yj0qn" isExecutable="false" />
  <bpmn:message id="Message_05simf4" name="paymentRequest" />
  <bpmn:message id="Message_1x56o4y" name="returnUniqueAmount" />
  <bpmn:message id="Message_1ck2ae4" name="receivePaymentStatus" />
  <bpmn:message id="Message_1fh6424" name="sendPaymentStatus" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_07iv80a">
      <bpmndi:BPMNShape id="Participant_1nji27d_di" bpmnElement="Participant_1nji27d">
        <dc:Bounds x="146" y="175" width="983" height="275" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_0zhscvb_di" bpmnElement="StartEvent_1">
        <dc:Bounds x="185" y="257" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_0vy2dj5_di" bpmnElement="Task_0vy2dj5">
        <dc:Bounds x="271" y="235" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1foky9s_di" bpmnElement="SequenceFlow_1foky9s">
        <di:waypoint x="221" y="275" />
        <di:waypoint x="271" y="275" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_0x2mpsp_di" bpmnElement="Participant_0x2mpsp">
        <dc:Bounds x="146" y="477" width="856" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_07trmyx_di" bpmnElement="Participant_07trmyx">
        <dc:Bounds x="146" y="81" width="984" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="IntermediateCatchEvent_0xa6h0l_di" bpmnElement="IntermediateThrowEvent_0grotl5">
        <dc:Bounds x="571" y="323" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="570" y="366" width="38" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_1pjaqp6_di" bpmnElement="Task_1pjaqp6">
        <dc:Bounds x="421" y="235" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1qbf7gc_di" bpmnElement="SequenceFlow_1qbf7gc">
        <di:waypoint x="371" y="275" />
        <di:waypoint x="421" y="275" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0bkiv4e_di" bpmnElement="SequenceFlow_0bkiv4e">
        <di:waypoint x="521" y="275" />
        <di:waypoint x="571" y="275" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="IntermediateThrowEvent_0oq4m7n_di" bpmnElement="IntermediateThrowEvent_1y0gefv">
        <dc:Bounds x="571" y="257" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="546" y="300" width="87" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="MessageFlow_1nmcgwc_di" bpmnElement="MessageFlow_1nmcgwc">
        <di:waypoint x="589" y="257" />
        <di:waypoint x="589" y="141" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0h2ta5b_di" bpmnElement="SequenceFlow_0h2ta5b">
        <di:waypoint x="471" y="315" />
        <di:waypoint x="471" y="341" />
        <di:waypoint x="571" y="341" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0kw3mss_di" bpmnElement="SequenceFlow_0kw3mss">
        <di:waypoint x="607" y="275" />
        <di:waypoint x="657" y="275" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="IntermediateCatchEvent_0vjcd5d_di" bpmnElement="IntermediateThrowEvent_0d9m3m8">
        <dc:Bounds x="657" y="257" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="632" y="300" width="86" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="MessageFlow_1rqme2y_di" bpmnElement="MessageFlow_1rqme2y">
        <di:waypoint x="675" y="477" />
        <di:waypoint x="675" y="293" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_0zipbpk_di" bpmnElement="Task_0zipbpk">
        <dc:Bounds x="743" y="235" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_03zug16_di" bpmnElement="SequenceFlow_03zug16">
        <di:waypoint x="693" y="275" />
        <di:waypoint x="743" y="275" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_0z3rlgr_di" bpmnElement="ExclusiveGateway_0z3rlgr" isMarkerVisible="true">
        <dc:Bounds x="893" y="250" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1vbtzg4_di" bpmnElement="SequenceFlow_1vbtzg4">
        <di:waypoint x="843" y="275" />
        <di:waypoint x="893" y="275" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0pm8tqi_di" bpmnElement="SequenceFlow_0pm8tqi">
        <di:waypoint x="943" y="275" />
        <di:waypoint x="993" y="275" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_0lqao2k_di" bpmnElement="EndEvent_1hvorwe">
        <dc:Bounds x="993" y="257" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="MessageFlow_1fuwq7g_di" bpmnElement="MessageFlow_1fuwq7g">
        <di:waypoint x="1011" y="257" />
        <di:waypoint x="1011" y="141" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_188q1po_di" bpmnElement="SequenceFlow_188q1po">
        <di:waypoint x="607" y="341" />
        <di:waypoint x="1011" y="341" />
        <di:waypoint x="1011" y="293" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_176gbgu_di" bpmnElement="SequenceFlow_176gbgu">
        <di:waypoint x="918" y="250" />
        <di:waypoint x="918" y="209" />
        <di:waypoint x="675" y="209" />
        <di:waypoint x="675" y="257" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
